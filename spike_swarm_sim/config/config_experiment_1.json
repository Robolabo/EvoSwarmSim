{
    "checkpoint_file" : "chk_experiment_1",
    "topology" : {
        "dt" : 0.1,
        "time_scale" : 1,
        "stimuli": {
            "I1" : {"n" : 4, "sensor" : "yellow_light_sensor"},
            "I2" : {"n" : 4, "sensor" : "red_light_sensor"},
            "I3" : {"n" : 4, "sensor" : "distance_sensor3D"},
            "I4" : {"n" : 4, "sensor" : "color_sensor"},
            "I5" : {"n" : 1, "sensor" : "ground_sensor"},
            "I6" : {"n" : 1, "sensor" : "object_grasped_sensor"},
            "I7" : {"n" : 1, "sensor" : "task_sensor"}
        },
        "neuron_model" : "rate_model",
        "synapse_model" : "static_synapse",
        "ensembles": {
            "H" : {"n" : 5, "params" : {}},
            "OUT_MOT" : {"n" : 2, "params" : {"activation" : "tanh"}},
            "OUT_GRASP" : {"n" : 3, "params" : {}}
        },
        "outputs" : {
            "outA" : {"ensemble" : "OUT_MOT", "actuator" : "joint_velocity_actuator", "enc": "real"},
            "outD" : {"ensemble" : "OUT_GRASP", "actuator" : "grasp_actuator", "enc": "real"}
        },
        "synapses" :  {
            "I1-H" : {"pre":"I1","post":"H", "trainable":true, "p":1.0},
            "I2-H" : {"pre":"I2","post":"H", "trainable":true, "p":1.0},
            "I3-H" : {"pre":"I3","post":"H", "trainable":true, "p":1.0},
            "I4-H" : {"pre":"I4","post":"H", "trainable":true, "p":1.0},
            "I5-H" : {"pre":"I5","post":"H", "trainable":true, "p":1.0},
            "I6-H" : {"pre":"I6","post":"H", "trainable":true, "p":1.0},
            "I7-H" : {"pre":"I7","post":"H", "trainable":true, "p":1.0},
            "H-MOT" : {"pre":"H","post":"OUT_MOT", "trainable":true, "p":1.0},
            "H-GRASP" : {"pre":"H","post":"OUT_GRASP", "trainable":true, "p":1.0}
        },
        "decoding" : {
            "outA" : {"scheme" : "IdentityDecoding", "params" : {"is_cat" : false}},
            "outD" : {"scheme" : "SoftmaxDecoding", "params" : {"is_cat" : true}}   
        },
        "learning_rule" : { 
            "rule" : "generalized_hebbian",
            "reward" : null
        }
    },
    "algorithm" : {
        "name" : "NEAT",
        "evolvable_object" : "robotA",
        "population_size" : 300,
        "generations" : 2000,
        "evaluation_steps" : 4000,
        "num_evaluations" : 10,
        "fitness_function" : "task_switching",
        "populations" : {
            "p1" : {
                "objects" : ["synapses:weights:all", "neurons:bias:all",  "neurons:tau:all", "neurons:gain:all", "learning_rule:params:all"],
                "max_vals" : [5,  4, 1.2, 5, 4],
                "min_vals" : [-5, -4, -0.8, 0.05,-4],
                "params" : {
                    "encoding" : "real",
                    "p_weight_mut" : 0.1,
                    "p_node_mut" : 0.05,
                    "p_conn_mut" : 0.15,
                    "compatib_thresh" : 0.3,
                    "c1" : 1,
                    "c2" : 1,
                    "c3" : 0.6,
                    "species_elites" : 2
                }
            }          
        }
    },
    "world":{
        "engine" : "3D",
        "world_delay" : 1,
        "height":10,
        "width": 10,
        "objects" : {
            "robotA" : {
                "type" : "robot",
                "num_instances" : 3,
                "controller" : "neural_controller",
                "sensors" : {
                    "color_sensor" : {"n_sectors" : 4, "range" : 5},
                    "yellow_light_sensor" : {"n_sectors" : 4, "range" : 20, "noise_sigma" : 0.05},
                    "red_light_sensor" : {"n_sectors" : 4, "range" : 20, "noise_sigma" : 0.05},
                    "distance_sensor3D" : {"n_sectors" : 4, "range" : 3, "noise_sigma" : 0.05},
                    "object_grasped_sensor" : {},
                    "ground_sensor" : {},
                    "task_sensor" : {}
                },
                "actuators" : {
                    "joint_velocity_actuator" : {"joint_ids" : [0, 1], "max_velocity" : 15},
                    "grasp_actuator" : {}
                },
                "initializers" : {
                    "positions" : {"name" : "random_uniform",  "params" : {"low" : [-1, -3], "high" : [1, -2], "size" : 2}},
                    "orientations" : {"name" : "random_uniform",  "params" : {"low":0, "high" : 6.28, "size" : 1}}
                },
                "perturbations" : {
                },
                "params" : {"trainable" : true}
            },
            "light_yellow" : {
                "type" : "light_source",
                "num_instances": 1,
                "initializers" : {
                    "positions" : {"name" : "fixed_random", "params" : {"possible_values": [[0, 3.5], [3.5, 0], [-3.5, 0]]}}
                },
                "params" : {"range" : 20, "color" : "yellow"}
            },
            "ground_area_grey" : {
                "type" : "ground_area",
                "num_instances": 3,
                "initializers" : {
                    "positions" : {"name" : "fixed", "params" : {"fixed_values": [[0, 3.5], [3.5, 0], [-3.5, 0]]}}
                },
                "params" : {"radius" : 1.5, "color" : "grey"}
            },
            "cube_blue" : {
                "type" : "cube",
                "num_instances": 3,
                "initializers" : {
                    "positions" : {"name" : "random_uniform",  "params" : {"low" : [-1, -1], "high" : [1, 2], "size" : 2}}
                },
                "params" : {"mass" : 0.1, "side_len" : 0.2, "color" : "blue"}
            },
            "light_red" : {
                "type" : "light_source",
                "num_instances": 1,
                "controller" : "light_orbit_controller",
                "initializers" : {
                    "positions" : {"name" : "random_uniform", "params" : {"low":-1, "high" : 1, "size" : 2}}
                },
                "params" : {"range" : 20, "color" : "red"}
            }, 
            "task_scheduler" : {
                "type" : "task_scheduler",
                "num_instances": 1,
                "params" : {"num_tasks" : 2, "num_slots" : 2, "total_timesteps" : 4000}
            }
        }
    }
}
